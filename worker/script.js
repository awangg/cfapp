!function(t){var e={};function n(r){if(e[r])return e[r].exports;var o=e[r]={i:r,l:!1,exports:{}};return t[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)n.d(r,o,function(e){return t[e]}.bind(null,o));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=0)}([function(t,e,n){const{CSSEditor:r,HeadingEditor:o,TextEditor:i,LinkEditor:a}=n(1),s=n(2);function c(){let t=new Date;return t.setTime(t.getTime()+604800),t.toUTCString()}addEventListener("fetch",t=>{t.respondWith(async function(t){if("POST"==t.method){return await async function(t){let e=t.headers.get("Cookie")||"",n=await fetch("https://cfw-takehome.developers.workers.dev/api/variants"),s=(await n.json()).variants,l=Math.floor(Math.random()*s.length);e.split("; ").forEach(t=>{let e=t.split("=");0==e[0].localeCompare("variant")&&(l=parseInt(e[1]))});let d=await fetch(s[l]),u=(new HTMLRewriter).on(".bg-white",new r(l)).on("h1#title",new o(l)).on("p#description",new i(l)).on("a#url",new a(l)).transform(d);const p=await u.text();return new Response(p,{headers:{"Content-Type":"text/html","Set-Cookie":`variant=${l}; Expires=${c()}`}})}(t)}return new Response(s,{headers:{"Content-Type":"text/html"}})}(t.request))})},function(t,e){t.exports={CSSEditor:class{constructor(t){this.variant=t}element(t){1==this.variant&&t.setAttribute("style","animation: MoveUpDown 1s infinite alternate;")}},HeadingEditor:class{constructor(t){this.variant=t}element(t){let e=1==this.variant?"You will be a CF Intern!":"You were passed over by CF.";t.setInnerContent(e)}},TextEditor:class{constructor(t){this.variant=t}element(t){let e=1==this.variant?"Time to celebrate! First, let's flex on LinkedIn.":"No problem! I know what'll cheer you up.";t.setInnerContent(e)}},LinkEditor:class{constructor(t){this.variant=t}element(t){let e=1==this.variant?"Go to LinkedIn":"It's a surprise",n=1==this.variant?"https://www.linkedin.com/":"https://www.reddit.com/r/aww/";t.setInnerContent(e),t.setAttribute("href",n)}}}},function(t,e){t.exports='\n<head>\n    <title> Fortune Machine </title>\n    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">\n    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/3.7.2/animate.css">\n</head>\n<style>\n@import url(\'https://fonts.googleapis.com/css2?family=Indie+Flower&display=swap\');\n\nbody {\n    background-color: rgba(0,0,0,.8);\n    display: flex;\n    align-items: center;\n    justify-content: center;\n}\n\n.card {\n    animation: MoveUpDown 1s infinite alternate;\n    font-size: 1.7rem;\n    font-family: \'Indie Flower\', cursive;\n    border-radius: 32px;\n    background-color: #fff;\n    box-shadow: 0px 0px 8px 2px rgba(0,0,0,0.2);\n}\n\n@keyframes MoveUpDown {\n    0% {\n        transform: translateY(0);\n    }\n    100% {\n        transform: translateY(-.5rem);\n    }\n}\n\n.card:hover {\n    transition: .5s;\n    background-color: #e0e0e0;\n    box-shadow: 0px 0px 10px 5px rgba(0,0,0,0.4);\n}\n\n</style>\n<body class="text-center">\n<div class="card d-block mx-auto animated fadeInDown" id="button" style="width: 15rem; height: 15rem;">\n    <div class="card-body">\n        <img src="https://officialpsds.com/imageview/7y/3v/7y3vm6_large.png?1535118838" class="d-block mx-auto" style="width:8rem; height: 8rem;">\n        <span class="mt-5">ask what your future holds</span>\n    </div>\n</div>\n<script src="https://code.jquery.com/jquery-3.5.0.js" integrity="sha256-r/AaFHrszJtwpe+tHyNi/XCfMxYpbsRg2Uqn0x3s2zc=" crossorigin="anonymous"><\/script>\n<script type="text/javascript">\n\n// Add click event to button that triggers fetch request\n$(\'#button\').on(\'click\', () => {\n    loadVariant();\n});\n\nfunction loadVariant() {\n    // Fetch one of the variants\n    fetch(window.location.pathname, {\n        method: \'POST\'\n    }).then( (response) => {\n        // Retrieve the HTML\n        response.text().then( text => {\n            $(\'title\').text(\'Your Fortune Is...\')\n\n            // Switch from landing page to variant page\n            $(\'#button\').fadeOut(1500, function() {\n                $(\'body\').html(text);\n\n                // Check if it\'s variant 0 (rejection) and change the SVG if it is\n                if(text.includes(\'passed over\')) {\n                    $(\'svg\').html(`<path d="M32 2C15.432 2 2 15.432 2 32s13.432 30 30 30s30-13.432 30-30S48.568 2 32 2zm0 57.5C16.836 59.5 4.5 47.164 4.5 32S16.836 4.5 32 4.5S59.5 16.836 59.5 32S47.164 59.5 32 59.5z" fill="#626262"/><circle cx="20.5" cy="24.592" r="5" fill="#626262"/><circle cx="43.5" cy="24.592" r="5" fill="#626262"/><path d="M32 36.572c-6.354 0-11.314 3.604-13.771 7.65c-.658 1.082.217 2.254 1.188 1.578c8.109-5.656 17.107-5.623 25.168 0c.971.676 1.846-.496 1.188-1.578c-2.459-4.046-7.419-7.65-13.773-7.65" fill="#626262"/>`)\n                    .attr(\'viewBox\',\'0 0 64 64\').attr(\'class\',\'h-6 w-6 text-red-600\').parent().removeClass(\'bg-green-100\').addClass(\'bg-red-100\');\n                }\n            });\n        })\n    })\n}\n<\/script>\n</body>'}]);